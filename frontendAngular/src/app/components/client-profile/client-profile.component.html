<div class="client-profile-container">
  <h2>Profil Client</h2>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading">Chargement...</div>

  <!-- Error Message -->
  <div *ngIf="errorMessage && !isLoading" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage && !isLoading" class="success-message">
    {{ successMessage }}
  </div>

  <!-- Profile Form -->
  <form
    *ngIf="!isLoading"
    (ngSubmit)="onSubmit(profileForm)"
    class="profile-form"
    #profileForm="ngForm"
  >
    <div class="form-group">
      <label for="nom">Nom</label>
      <input
        [(ngModel)]="client.nom"
        name="nom"
        id="nom"
        placeholder="Nom"
        required
        maxlength="100"
        #nom="ngModel"
      />
      <span class="error" *ngIf="nom.invalid && nom.touched">
        Le nom est requis (max 100 caractères).
      </span>
    </div>

    <div class="form-group">
      <label for="prenom">Prénom</label>
      <input
        [(ngModel)]="client.prenom"
        name="prenom"
        id="prenom"
        placeholder="Prénom"
        required
        maxlength="100"
        #prenom="ngModel"
      />
      <span class="error" *ngIf="prenom.invalid && prenom.touched">
        Le prénom est requis (max 100 caractères).
      </span>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        [(ngModel)]="client.email"
        name="email"
        id="email"
        type="email"
        placeholder="Email"
        required
        email
        #email="ngModel"
      />
      <span class="error" *ngIf="email.invalid && email.touched">
        Veuillez entrer un email valide.
      </span>
    </div>

    <div class="form-group">
      <label for="telephone">Téléphone (8 chiffres)</label>
      <input
        [(ngModel)]="client.telephone"
        name="telephone"
        id="telephone"
        placeholder="Téléphone (8 chiffres)"
        required
        pattern="[0-9]{8}"
        #telephone="ngModel"
      />
      <span class="error" *ngIf="telephone.invalid && telephone.touched">
        Le téléphone doit contenir exactement 8 chiffres.
      </span>
    </div>

    <div class="form-group">
      <label for="adresse">Adresse</label>
      <input
        [(ngModel)]="client.adresse"
        name="adresse"
        id="adresse"
        placeholder="Adresse"
        maxlength="200"
        #adresse="ngModel"
      />
      <span class="error" *ngIf="adresse.invalid && adresse.touched">
        L'adresse ne doit pas dépasser 200 caractères.
      </span>
    </div>

    <div class="form-group">
      <label for="dateNaissance">Date de naissance</label>
      <input
        [(ngModel)]="client.dateNaissance"
        name="dateNaissance"
        id="dateNaissance"
        type="date"
        [max]="today"
        #dateNaissance="ngModel"
      />
      <span class="hint">Format: YYYY-MM-DD (ex. 1990-01-01)</span>
      <span class="error" *ngIf="dateNaissance.invalid && dateNaissance.touched">
        La date de naissance doit être dans le passé.
      </span>
    </div>

    <button type="submit" [disabled]="profileForm.invalid">Mettre à jour</button>
  </form>
</div>
